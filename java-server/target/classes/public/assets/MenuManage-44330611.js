import{d as T,U as o,m as d,J as v,_ as b,c as m,e,A as f,B as _,V as k,h as r,w as u,v as c,C as l,K as D,D as C,W as I,o as g}from"./index-d699cdc0.js";/* empty css             *//* empty css                 */import{g as A,a as h,m as w,b as B}from"./systemServ-7a4496b3.js";const x=T({data:()=>({nodes:[],editedNode:{},currentNode:{},roleList:[],dialogTitle:"",disabled:!1,editType:0,roleAdmin:!1,roleStudent:!1,roleTeacher:!1,defaultProps:{children:"children",label:"label"}}),async created(){this.roleList=await A(),this.nodes=await h()},methods:{addItemFirst(){this.editedNode={},this.editedNode.pid=null,this.editedNode.parentTitle="",this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.dialogTitle="添加一级菜单对话框",this.disabled=!1,this.editType=0,o("favDialog").show()},addItem(t){this.currentNode=t,this.editedNode={},this.editedNode.pid=this.currentNode.id,this.editedNode.parentTitle=this.currentNode.title,this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.dialogTitle="添加菜单对话框",this.disabled=!1,this.editType=1,o("favDialog").show()},editItem(t){this.currentNode=t,this.editedNode=this.currentNode,this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.currentNode.userTypeIds!=null&&this.currentNode.userTypeIds!=null&&this.currentNode.userTypeIds!=""&&(this.currentNode.userTypeIds.indexOf("1")>=0?this.roleAdmin=!0:this.roleAdmin=!1,this.currentNode.userTypeIds.indexOf("2")>=0?this.roleStudent=!0:this.roleStudent=!1,this.currentNode.userTypeIds.indexOf("3")>=0?this.roleTeacher=!0:this.roleTeacher=!1),this.dialogTitle="修改菜单对话框",this.disabled=!0,this.editType=2,o("favDialog").show()},close(){o("favDialog").close()},async confirm(){this.close(),this.roleAdmin,this.roleStudent,this.roleAdmin;const t=await w(this.editType,this.editedNode);t.code==0?(d(this,"保存成功"),this.nodes=await h()):d(this,t.msg)},async deleteItem(t){if(this.currentNode=t,!await v("确认删除吗?"))return;const n=await B(this.currentNode.id);n.code==0?(d(this,"删除成功"),this.nodes=await h()):d(this,n.msg)}}});const E={class:"base_form"},S=e("div",{class:"base_header"},[e("div",{class:"blue_column"}),e("div",{class:"base_title"},"菜单管理")],-1),$={class:"base_query_oneLine"},F={class:"query_left"},V={key:0,class:"custom-tree-container"},M={class:"custom-tree-node"},L=["onClick"],O=["onClick"],U=["onClick"],q={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},J={class:"base_title"},K={class:"dialog-div",style:{"margin-top":"5px"}},P={class:"dialog-content"},R=e("td",{colspan:"1",style:{"text-align":"right"}},"父节点",-1),W={colspan:"1"},j=e("td",{colspan:"1",style:{"text-align":"right"}},"主键ID",-1),z={colspan:"1"},G=["disabled"],H=e("td",{colspan:"1",style:{"text-align":"right"}},"菜单名称",-1),Q={colspan:"1"},X=e("td",{colspan:"1",style:{"text-align":"right"}},"菜单标题",-1),Y={colspan:"1"},Z=e("td",{colspan:"1",style:{"text-align":"right"}},"角色",-1),ee={colspan:"1"},te=["checked"],se=["checked"],ie=["checked"],oe={colspan:"2"};function de(t,s,n,le,ne,ae){const y=C,N=I;return g(),m(D,null,[e("div",E,[S,e("div",$,[e("div",F,[f(y,{color:"#96282d",style:{"margin-left":"5px"},type:"primary",onClick:t.addItemFirst},{default:_(()=>[l(" 添加一级菜单 ")]),_:1},8,["onClick"])])]),t.nodes!==null?(g(),m("div",V,[f(N,{data:t.nodes,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:_(({node:i,data:a})=>[e("span",M,[e("span",null,r(i.label),1),e("span",null,[e("a",{onClick:p=>t.addItem(a)}," 添加 ",8,L),e("a",{style:{"margin-left":"5px"},onClick:p=>t.editItem(a)}," 修改 ",8,O),e("a",{style:{"margin-left":"5px"},onClick:p=>t.deleteItem(a)}," 删除 ",8,U)])])]),_:1},8,["data"])])):k("",!0)]),e("dialog",q,[e("div",J,r(t.dialogTitle),1),e("div",K,[e("table",P,[e("tr",null,[R,e("td",W,r(t.editedNode.parentTitle),1)]),e("tr",null,[j,e("td",z,[u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>t.editedNode.id=i),class:"commInput",disabled:t.disabled},null,8,G),[[c,t.editedNode.id]])])]),e("tr",null,[H,e("td",Q,[u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>t.editedNode.value=i),class:"commInput"},null,512),[[c,t.editedNode.value]])])]),e("tr",null,[X,e("td",Y,[u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>t.editedNode.title=i),class:"commInput"},null,512),[[c,t.editedNode.title]])])]),e("tr",null,[Z,e("td",ee,[e("input",{type:"checkbox",checked:t.roleAdmin},null,8,te),l("管理员 "),e("input",{type:"checkbox",checked:t.roleStudent},null,8,se),l("学生 "),e("input",{type:"checkbox",checked:t.roleTeacher},null,8,ie),l("教师 ")])]),e("tr",null,[e("td",oe,[e("button",{class:"commButton",onClick:s[3]||(s[3]=i=>t.close()),style:{"margin-right":"30px","margin-left":"80px"}}," 取消 "),e("button",{class:"commButton",onClick:s[4]||(s[4]=i=>t.confirm())},"确认")])])])])])],64)}const pe=b(x,[["render",de]]);export{pe as default};
