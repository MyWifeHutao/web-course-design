import{d as J,g as I,u as p,t as B,m as n,r as K,a as Q,b as v,E as C,_ as X,c as Y,e as s,n as F,w as d,v as f,f as ee,h as x,o as te,p as se,i as oe}from"./index-d699cdc0.js";const N="3.7.5",ie=N,ne=typeof atob=="function",re=typeof btoa=="function",g=typeof Buffer=="function",T=typeof TextDecoder=="function"?new TextDecoder:void 0,V=typeof TextEncoder=="function"?new TextEncoder:void 0,ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=Array.prototype.slice.call(ae),w=(e=>{let t={};return e.forEach((i,a)=>t[i]=a),t})(y),ue=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,r=String.fromCharCode.bind(String),k=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),P=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),$=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),R=e=>{let t,i,a,h,l="";const o=e.length%3;for(let b=0;b<e.length;){if((i=e.charCodeAt(b++))>255||(a=e.charCodeAt(b++))>255||(h=e.charCodeAt(b++))>255)throw new TypeError("invalid character found");t=i<<16|a<<8|h,l+=y[t>>18&63]+y[t>>12&63]+y[t>>6&63]+y[t&63]}return o?l.slice(0,o-3)+"===".substring(o):l},_=re?e=>btoa(e):g?e=>Buffer.from(e,"binary").toString("base64"):R,L=g?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let a=0,h=e.length;a<h;a+=4096)i.push(r.apply(null,e.subarray(a,a+4096)));return _(i.join(""))},A=(e,t=!1)=>t?P(L(e)):L(e),le=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?r(192|t>>>6)+r(128|t&63):r(224|t>>>12&15)+r(128|t>>>6&63)+r(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return r(240|t>>>18&7)+r(128|t>>>12&63)+r(128|t>>>6&63)+r(128|t&63)}},de=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,M=e=>e.replace(de,le),S=g?e=>Buffer.from(e,"utf8").toString("base64"):V?e=>L(V.encode(e)):e=>_(M(e)),m=(e,t=!1)=>t?P(S(e)):S(e),D=e=>m(e,!0),ce=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,he=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return r((i>>>10)+55296)+r((i&1023)+56320);case 3:return r((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return r((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},z=e=>e.replace(ce,he),Z=e=>{if(e=e.replace(/\s+/g,""),!ue.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",a,h;for(let l=0;l<e.length;)t=w[e.charAt(l++)]<<18|w[e.charAt(l++)]<<12|(a=w[e.charAt(l++)])<<6|(h=w[e.charAt(l++)]),i+=a===64?r(t>>16&255):h===64?r(t>>16&255,t>>8&255):r(t>>16&255,t>>8&255,t&255);return i},E=ne?e=>atob($(e)):g?e=>Buffer.from(e,"base64").toString("binary"):Z,j=g?e=>k(Buffer.from(e,"base64")):e=>k(E(e).split("").map(t=>t.charCodeAt(0))),O=e=>j(H(e)),fe=g?e=>Buffer.from(e,"base64").toString("utf8"):T?e=>T.decode(j(e)):e=>z(E(e)),H=e=>$(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),U=e=>fe(H(e)),pe=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},W=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),q=function(){const e=(t,i)=>Object.defineProperty(String.prototype,t,W(i));e("fromBase64",function(){return U(this)}),e("toBase64",function(t){return m(this,t)}),e("toBase64URI",function(){return m(this,!0)}),e("toBase64URL",function(){return m(this,!0)}),e("toUint8Array",function(){return O(this)})},G=function(){const e=(t,i)=>Object.defineProperty(Uint8Array.prototype,t,W(i));e("toBase64",function(t){return A(this,t)}),e("toBase64URI",function(){return A(this,!0)}),e("toBase64URL",function(){return A(this,!0)})},me=()=>{q(),G()},u={version:N,VERSION:ie,atob:E,atobPolyfill:Z,btoa:_,btoaPolyfill:R,fromBase64:U,toBase64:m,encode:m,encodeURI:D,encodeURL:D,utob:M,btou:z,decode:U,isValid:pe,fromUint8Array:A,toUint8Array:O,extendString:q,extendUint8Array:G,extendBuiltins:me};function ge(e){return e?!0:"您必须输入用户名密码"}const ve=J({data:()=>({personId:0,isLogin:!0,username:"",password:"",valiCode:"",pageType:1,id:0,jwt:"",img:"",funId:"",vueName:"",loginCode:"",email:"",messageCode:"",showSlider:!1,remember:!0,role:"",perName:"",rules:[ge],showLeftList:!1}),beforeMount(){this.pageType=1},async created(){const e=await I();this.id=e.validateCodeId,this.img=e.img;const t=p();t.remember?(this.username=u.decode(t.usernameSave),this.password=u.decode(t.passwordSave),this.remember=!0):(this.username="",this.password="",this.remember=!1)},methods:{refresh(){window.location.reload()},async changeValiCode(){const e=await I();this.id=e.validateCodeId,this.img=e.img,this.valiCode=""},backLogin(){this.username="",this.password="",this.valiCode="",this.role="",this.pageType=1},forgetPass(){this.username="",this.password="",this.valiCode="",this.pageType=2},pageRegister(){this.username="",this.password="",this.valiCode="",this.pageType=3},async initPassword(){let e=await B({validateCodeId:this.id,validateCode:this.valiCode});if(e.code!=0){n(this,e.msg),this.changeValiCode();return}if(this.username==""||this.username==null){n(this,"账号为空,请填写账号");return}if(this.email==""||this.email==null){n(this,"邮箱为空,请填写邮箱");return}e=await K({username:this.username,email:this.email}),e.code==0?(n(this,"初始密码已发送至您的邮箱，请注意查收"),this.changeValiCode(),this.pageType=1):n(this,e.msg)},async register(){let e=await B({validateCodeId:this.id,validateCode:this.valiCode});if(e.code!=0){n(this,e.msg),this.changeValiCode(),this.showLeftList=!this.showLeftList;return}if(this.username==""||this.username==null){n(this,"账号为空,请填写账号");return}if(this.password==""||this.password==null){n(this,"账号为空,请填写密码");return}if(this.perName==""||this.perName==null){n(this,"姓名为空,请填写姓名");return}if(this.email==""||this.email==null){n(this,"邮箱为空,请填写邮箱");return}if(this.role==""||this.role==null){n(this,"角色为空,请选择角色");return}e=await Q({username:this.username,password:this.password,perName:this.perName,email:this.email,roles:this.role}),e.code==0?(n(this,"已注册成功！"),this.changeValiCode(),this.pageType=1):n(this,e.msg)},async stu1Login(){const e=p();try{await e.login("202200300050","123456"),console.log(e.userInfo),await e.setNavi(),this.remember?e.saveAccount(u.encode(this.username),u.encode(this.password)):e.removeAccount(),v.push("/MainPage"),setTimeout(this.refresh,500);const t=C.service({fullscreen:!0,lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{t.close()},2e3)}catch{this.changeValiCode(),n(this,"登录失败!!!")}},async stu2Login(){const e=p();try{await e.login("202200300050","123456"),console.log(e.userInfo),await e.setNavi(),this.remember?e.saveAccount(u.encode(this.username),u.encode(this.password)):e.removeAccount(),v.push("/MainPage"),setTimeout(this.refresh,500);const t=C.service({fullscreen:!0,lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{t.close()},2e3)}catch{this.changeValiCode(),n(this,"登录失败!!!")}},async teacherLogin(){const e=p();try{await e.login("teacher1","123"),console.log(e.userInfo),await e.setNavi(),this.remember?e.saveAccount(u.encode(this.username),u.encode(this.password)):e.removeAccount(),v.push("/MainPage"),setTimeout(this.refresh,500);const t=C.service({fullscreen:!0,lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{t.close()},2e3)}catch{this.changeValiCode(),n(this,"登录失败!!!")}},async adminLogin(){const e=p();try{await e.login("admin","123456"),console.log(e.userInfo),await e.setNavi(),this.remember?e.saveAccount(u.encode(this.username),u.encode(this.password)):e.removeAccount(),v.push("/MainPage"),setTimeout(this.refresh,500);const t=C.service({fullscreen:!0,lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{t.close()},2e3)}catch{this.changeValiCode(),n(this,"登录失败!!!")}},async loginSubmit(){const e=await B({validateCodeId:this.id,validateCode:this.valiCode});if(e.code!=0){n(this,e.msg),this.changeValiCode();return}if(this.username==""||this.username==null)n(this,"用户名为空");else if(this.password==""||this.password==null)n(this,"密码为空");else{const t=p();try{await t.login(this.username,this.password),console.log(t.userInfo),await t.setNavi(),this.remember?t.saveAccount(u.encode(this.username),u.encode(this.password)):t.removeAccount(),v.push("/MainPage"),setTimeout(this.refresh,500);const i=C.service({fullscreen:!0,lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{i.close()},2e3)}catch{this.changeValiCode(),n(this,"登录失败!!!")}}}}});const c=e=>(se("data-v-20968d13"),e=e(),oe(),e),Ce={class:"page"},ye={class:"main"},be={class:"main-box"},we=c(()=>s("h2",{class:"title"},"注册 学生管理系统",-1)),Ae=c(()=>s("span",{class:"text"},"or use email for registration",-1)),Be=c(()=>s("option",{value:"ADMIN"},"管理员",-1)),Fe=c(()=>s("option",{value:"STUDENT"},"学生",-1)),xe=c(()=>s("option",{value:"TEACHER"},"教师",-1)),Le=[Be,Fe,xe],Ue={class:"valicodediv"},_e=["src"],Ee=c(()=>s("h2",{class:"title"},"登录 学生管理系统",-1)),Ie=c(()=>s("span",{class:"text"},"或使用邮箱注册",-1)),Te={class:"valicodediv"},Ve=["src"],ke={class:"logindiv"},Se={class:"logindiv"},De=c(()=>s("div",{class:"switch__circle"},null,-1)),Ne=c(()=>s("div",{class:"switch__circle switch__circle_top"},null,-1)),Pe={class:"switch__container"};function $e(e,t,i,a,h,l){return te(),Y("div",Ce,[s("div",ye,[s("div",be,[s("div",{class:F(["container","container-register",{"is-txl":e.isLogin}])},[s("form",null,[we,Ae,d(s("input",{class:"form__input",type:"text",placeholder:"请输入邮箱","onUpdate:modelValue":t[0]||(t[0]=o=>e.email=o)},null,512),[[f,e.email]]),d(s("input",{class:"form__input",type:"text",placeholder:"请输入姓名","onUpdate:modelValue":t[1]||(t[1]=o=>e.perName=o)},null,512),[[f,e.perName]]),d(s("input",{class:"form__input",type:"text",placeholder:"请输入学号","onUpdate:modelValue":t[2]||(t[2]=o=>e.username=o)},null,512),[[f,e.username]]),d(s("input",{class:"form__input",type:"password",placeholder:"请输入密码","onUpdate:modelValue":t[3]||(t[3]=o=>e.password=o)},null,512),[[f,e.password]]),d(s("select",{class:"role","onUpdate:modelValue":t[4]||(t[4]=o=>e.role=o)},Le,512),[[ee,e.role]]),s("div",Ue,[d(s("input",{class:"valicode","onUpdate:modelValue":t[5]||(t[5]=o=>e.valiCode=o),placeholder:"请输入验证码"},null,512),[[f,e.valiCode]]),s("img",{onClick:t[6]||(t[6]=o=>e.changeValiCode()),class:"img1",referrerpolicy:"no-referrer",src:e.img},null,8,_e)]),s("div",{class:"register-btn",onClick:t[7]||(t[7]=o=>e.register())},"立即注册")])],2),s("div",{class:F(["container","container-login",{"is-txl is-z200":e.isLogin}])},[s("form",null,[Ee,Ie,d(s("input",{class:"form__input",type:"text",placeholder:"请输入学号","onUpdate:modelValue":t[8]||(t[8]=o=>e.username=o)},null,512),[[f,e.username]]),d(s("input",{class:"form__input",type:"password",placeholder:"请输入密码","onUpdate:modelValue":t[9]||(t[9]=o=>e.password=o)},null,512),[[f,e.password]]),s("div",Te,[d(s("input",{class:"valicode","onUpdate:modelValue":t[10]||(t[10]=o=>e.valiCode=o),placeholder:"请输入验证码"},null,512),[[f,e.valiCode]]),s("img",{onClick:t[11]||(t[11]=o=>e.changeValiCode()),class:"img1",referrerpolicy:"no-referrer",src:e.img},null,8,Ve)]),s("div",ke,[s("div",{class:"loginbt",onClick:t[12]||(t[12]=o=>e.adminLogin())},"管理员登录"),s("div",{class:"loginbt",onClick:t[13]||(t[13]=o=>e.stu1Login())},"学生一登录")]),s("div",Se,[s("div",{class:"loginbt",onClick:t[14]||(t[14]=o=>e.teacherLogin())},"教师登录"),s("div",{class:"loginbt",onClick:t[15]||(t[15]=o=>e.stu2Login())},"学生二登录")]),s("div",{class:"primary-btn",onClick:t[16]||(t[16]=o=>e.loginSubmit())},"立即登录")])],2),s("div",{class:F(["switch",{login:e.isLogin}])},[De,Ne,s("div",Pe,[s("h2",null,x(e.isLogin?"您好 !":"欢迎 !"),1),s("p",null,x(e.isLogin?"Enter your personal details and start journey with us":"To keep connected with us please login with your personal info"),1),s("div",{class:"primary-btn",onClick:t[17]||(t[17]=o=>e.isLogin=!e.isLogin)},x(e.isLogin?"立即注册":"立即登录"),1)])],2)])])])}const Me=X(ve,[["render",$e],["__scopeId","data-v-20968d13"]]);export{Me as default};
