import{d as D,I as F,m as h,J as V,_ as k,c as n,e as s,A as o,B as d,K as m,L as p,D as w,P as L,M as b,o as u,C as i,N as v,h as a,p as C,i as A,O as S,Q as $}from"./index-d699cdc0.js";import{g as B,a as N,b as q,s as U,c as O}from"./teachingServ-493b57e0.js";/* empty css              *//* empty css            *//* empty css               *//* empty css                  */const T=D({data:()=>({dialog:F(!1),scoreList:[],studentId:null,courseId:null,editedItem:{},studentList:[],courseList:[],deleteId:-1}),computed:{},created(){this.initialize()},methods:{async initialize(){this.scoreList=await B(this.studentId,this.courseId),this.studentList=await N(),this.courseList=await q()},async query(){this.scoreList=await B(this.studentId,this.courseId)},addItem(){this.dialog=!0,this.editedItem={},document.getElementById("favDialog").show()},editItem(t){this.dialog=!0,this.editedItem=t,document.getElementById("favDialog").show()},close(){this.dialog=!1},async confirm(){this.close();const t=await U(this.editedItem.scoreId,this.editedItem.studentId,this.editedItem.courseId,this.editedItem.mark);t.code==0?(h(this,"保存成功"),this.query()):h(this,t.msg)},async deleteItem(t){if(!await V("确认删除吗?"))return;const f=await O(t);f.code==0?(h(this,"删除成功"),this.query()):h(this,f.msg)}}});const r=t=>(C("data-v-0c1b32e4"),t=t(),A(),t),z={class:"base_form"},J=r(()=>s("div",{class:"base_header"},[s("div",{class:"blue_column"}),s("div",{class:"base_title"},"成绩管理")],-1)),K={class:"base_query_oneLine"},M={class:"query_left"},P={class:"query_right"},Q=r(()=>s("span",{style:{"margin-top":"5px"}},"学生",-1)),j=r(()=>s("span",{style:{"margin-top":"5px"}},"课程",-1)),G={class:"table_center",style:{"margin-top":"5px"}},H={class:"content"},R=r(()=>s("tr",{class:"table_th"},[s("td",null,"学号"),s("td",null,"姓名"),s("td",null,"班级"),s("td",null,"课程号"),s("td",null,"课程名"),s("td",null,"学分"),s("td",null,"成绩"),s("td",null,"操作")],-1)),W={class:"rowDiv"},X=r(()=>s("div",{class:"headDiv"},"学生",-1)),Y={class:"rowDiv"},Z=r(()=>s("div",{class:"headDiv"},"课程",-1)),x={class:"rowDiv"},ee=r(()=>s("div",{class:"headDiv"},"成绩",-1)),te={class:"rowDiv"};function se(t,l,f,le,de,oe){const c=w,_=S,I=L,g=$,E=b;return u(),n(m,null,[s("div",z,[J,s("div",K,[s("div",M,[o(c,{color:"#96282d",onClick:l[0]||(l[0]=e=>t.addItem())},{default:d(()=>[i("添加")]),_:1})]),s("div",P,[Q,o(I,{class:"commInput",placeholder:"请选择学生",modelValue:t.studentId,"onUpdate:modelValue":l[1]||(l[1]=e=>t.studentId=e)},{default:d(()=>[(u(!0),n(m,null,p(t.studentList,e=>(u(),v(_,{key:e.id,value:e.id},{default:d(()=>[i(a(e.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),j,o(I,{placeholder:"请选择课程",class:"commInput",modelValue:t.courseId,"onUpdate:modelValue":l[2]||(l[2]=e=>t.courseId=e)},{default:d(()=>[(u(!0),n(m,null,p(t.courseList,e=>(u(),v(_,{key:e.id,value:e.id},{default:d(()=>[i(a(e.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o(c,{style:{"margin-left":"5px"},color:"#96282d",onClick:l[3]||(l[3]=e=>t.query())},{default:d(()=>[i(" 查询 ")]),_:1})])]),s("div",G,[s("table",H,[R,(u(!0),n(m,null,p(t.scoreList,e=>(u(),n("tr",{key:e.scoreId},[s("td",null,a(e.studentNum),1),s("td",null,a(e.studentName),1),s("td",null,a(e.className),1),s("td",null,a(e.courseNum),1),s("td",null,a(e.courseName),1),s("td",null,a(e.credit),1),s("td",null,a(e.mark),1),s("td",null,[o(c,{color:"#96282d",onClick:y=>t.editItem(e)},{default:d(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),o(c,{color:"#fa581e",style:{color:"white"},onClick:y=>t.deleteItem(e.scoreId)},{default:d(()=>[i(" 删除 ")]),_:2},1032,["onClick"])])]))),128))])])]),o(E,{style:{width:"20%"},modelValue:t.dialog,"onUpdate:modelValue":l[9]||(l[9]=e=>t.dialog=e),class:"dialog",id:"favDialog",onclose:"close()",title:"成绩添加修改对话框"},{default:d(()=>[s("div",W,[X,o(I,{modelValue:t.editedItem.studentId,"onUpdate:modelValue":l[4]||(l[4]=e=>t.editedItem.studentId=e),style:{width:"100%"},placeholder:"请选择学生"},{default:d(()=>[(u(!0),n(m,null,p(t.studentList,e=>(u(),v(_,{key:e.id,value:e.id},{default:d(()=>[i(a(e.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),s("div",Y,[Z,o(I,{modelValue:t.editedItem.courseId,"onUpdate:modelValue":l[5]||(l[5]=e=>t.editedItem.courseId=e),style:{width:"100%"},placeholder:"请选择课程"},{default:d(()=>[(u(!0),n(m,null,p(t.courseList,e=>(u(),v(_,{key:e.id,value:e.id},{default:d(()=>[i(a(e.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),s("div",x,[ee,o(g,{modelValue:t.editedItem.mark,"onUpdate:modelValue":l[6]||(l[6]=e=>t.editedItem.mark=e),style:{width:"100%"}},null,8,["modelValue"])]),s("div",te,[o(c,{onClick:l[7]||(l[7]=e=>t.close())},{default:d(()=>[i("取消")]),_:1}),o(c,{onClick:l[8]||(l[8]=e=>t.confirm())},{default:d(()=>[i("确认")]),_:1})])]),_:1},8,["modelValue"])],64)}const me=k(T,[["render",se],["__scopeId","data-v-0c1b32e4"]]);export{me as default};
